Description: Avoid failure when built with hardened flags.
Author: Alessio Treglia <alessio@debian.org>
Forwarded: no
---
 configure.ac |   10 ----------
 1 file changed, 10 deletions(-)

--- mpg123.orig/configure.ac
+++ mpg123/configure.ac
@@ -32,16 +32,6 @@ AM_CONFIG_HEADER(src/config.h)
 # You get strange symptoms like jack module build failing because the AC_C_CONST failed to detect the working const support.
 # In that case, the test failed because -Werror, not because no const there...
 # After looking again, there are possibly more tests being obscured by false failures.
-AC_MSG_CHECKING([for -Werror in CFLAGS (It breaks tests)])
-if echo "$CFLAGS" | grep Werror; then
-	AC_MSG_RESULT([yes])
-	AC_MSG_ERROR([I refuse to run with -Werror in CFLAGS. That breaks tests and makes this configure bogus.
-If you want paranoid compilation, use --enable-nagging option, which adds -Werror for gcc.
-Also note that you shall not run make distcheck after configuring with --enable-nagging.
-distcheck uses the generated CFLAGS...])
-else
-	AC_MSG_RESULT([no])
-fi
 
 buffer=enabled # try to build with buffer by default
 
